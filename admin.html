{% extends "base.html" %}
{% block body %}
<div class="box" style="max-width: 900px; margin: 30px auto;">
    <h2 style="color: #00d9ff; margin-bottom: 20px;">‚öôÔ∏è Admin Panel</h2>
    
    <h3 style="color: #00ffff; margin-top: 20px; margin-bottom: 15px;">üë• User Management</h3>
    <p style="color: #a0a0a0; margin-bottom: 15px;"><strong>Rank Hierarchy:</strong> OWNER ‚Üí MANAGER ‚Üí MOD ‚Üí COUNCIL ‚Üí HELPER ‚Üí MEMBERS</p>
    
    {% if users %}
    <div style="background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 6px; border: 1px solid rgba(0, 217, 255, 0.1); overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="border-bottom: 2px solid rgba(0, 217, 255, 0.2);">
                <th style="text-align: left; padding: 12px; color: #00d9ff; font-weight: 600;">Username</th>
                <th style="text-align: left; padding: 12px; color: #00d9ff; font-weight: 600;">Current Rank</th>
                <th style="text-align: left; padding: 12px; color: #00d9ff; font-weight: 600;">Change Rank</th>
            </tr>
            {% for u in users %}
            <tr style="border-bottom: 1px solid rgba(0, 217, 255, 0.1);">
                <td style="padding: 12px; color: #e0e0e0;">
                    üë§ {{ u[1] }}
                    {% if current_user.username == u[1] %}
                    <span style="color: #a0a0a0; font-size: 0.85em;"> (You)</span>
                    {% endif %}
                </td>
                <td style="padding: 12px;">
                    <span style="background: rgba(0, 217, 255, 0.2); color: #00d9ff; padding: 6px 10px; border-radius: 4px; font-weight: 600;">
                        {{ u[2] }}
                    </span>
                </td>
                <td style="padding: 12px;">
                    {% if current_user.username != u[1] %}
                    <form method="post" action="/admin/user/{{ u[0] }}/rank" style="display: inline; margin: 0; padding: 0;">
                        <select name="rank" style="background: rgba(30, 40, 70, 0.8); color: #e0e0e0; border: 1px solid rgba(0, 217, 255, 0.3); padding: 6px 8px; border-radius: 4px; font-size: 0.9em;" onchange="this.form.submit();">
                            <option value="">-- Select Rank --</option>
                            {% for rank in rank_hierarchy %}
                            <option value="{{ rank }}" {% if u[2] == rank %}selected{% endif %}>{{ rank }}</option>
                            {% endfor %}
                        </select>
                    </form>
                    {% else %}
                    <span style="color: #a0a0a0; font-size: 0.9em;">Cannot change own rank</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% else %}
    <p style="color: #a0a0a0;">No users yet</p>
    {% endif %}

    <div style="margin-top: 20px; padding: 15px; background: rgba(0, 217, 255, 0.05); border: 1px solid rgba(0, 217, 255, 0.2); border-radius: 6px;">
        <p style="color: #a0a0a0; font-size: 0.9em; margin: 0;">
            <strong>Rank Permissions:</strong><br>
            ‚Ä¢ <strong>OWNER:</strong> Full access, can manage all users and ranks<br>
            ‚Ä¢ <strong>MANAGER:</strong> Can manage content and lower ranks<br>
            ‚Ä¢ <strong>MOD:</strong> Can delete and pin content<br>
            ‚Ä¢ <strong>COUNCIL:</strong> Community moderator<br>
            ‚Ä¢ <strong>HELPER:</strong> Can assist users<br>
            ‚Ä¢ <strong>MEMBERS:</strong> Regular user
        </p>
    </div>

    <div style="margin-top: 20px;">
        <a href="/" style="padding: 10px 12px; background: rgba(0, 217, 255, 0.2); border: 1px solid rgba(0, 217, 255, 0.3); border-radius: 6px; display: inline-block;">‚Üê Back to Home</a>
    </div>
</div>
{% endblock %}
